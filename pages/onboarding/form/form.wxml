<view class="container">
  <view class="page-title">请选择您的角色</view>
  <view class="page-desc" >请根据您的实际情况选择</view>

  <view class="role-selector" >
  <view 
    class="role-btn {{role === 'guardian' ? 'active' : ''}}" 
    bindtap="onRoleChange" 
    data-role="guardian"
  >
    我是监护人
  </view>
  <view 
    class="role-btn {{role === 'patient' ? 'active' : ''}}" 
    bindtap="onRoleChange" 
    data-role="patient"
  >
    我是患者
  </view>
</view>

  <view class="form-container">
    
    <block wx:if="{{role === 'guardian'}}">
      <view class="form-item">
        <text class="label">您的称呼</text>
        <input class="input" placeholder="请输入您的姓名或称呼" value="{{formData.guardianName}}" data-field="guardianName" bindinput="handleInputChange"/>
      </view>
      <view class="form-item">
        <text class="label">手机号码</text>
        <input class="input" type="number" placeholder="请输入您的手机号，用于接收提醒" value="{{formData.guardianPhone}}" data-field="guardianPhone" bindinput="handleInputChange"/>
      </view>
      <view class="form-item">
        <text class="label">与患者关系</text>
        <input class="input" placeholder="选填，如子女、配偶" value="{{formData.relationship}}" data-field="relationship" bindinput="handleInputChange"/>
      </view>
    </block>

    <block wx:if="{{role === 'patient'}}">
      <view class="form-item">
        <text class="label">姓名/称呼</text>
        <input class="input" placeholder="请输入患者的姓名或称呼" value="{{formData.patientName}}" data-field="patientName" bindinput="handleInputChange"/>
      </view>

      <view class="form-item photo-uploader">
        <text class="label">近期照片</text>
        <view class="uploader-area" bindtap="chooseImage">
          <image wx:if="{{formData.patientPhoto}}" class="preview-image" src="{{formData.patientPhoto}}" mode="aspectFill"></image>
          <text wx:else class="uploader-tip">点击上传（用于寻人）</text>
        </view>
      </view>

      <view class="form-item">
        <text class="label">性别</text>
        <picker class="picker" bindchange="bindGenderChange" value="{{genderIndex}}" range="{{genders}}">
            <view>{{genders[genderIndex]}}</view>
        </picker>
      </view>

      <view class="form-item">
        <text class="label">年龄</text>
        <input class="input" type="number" placeholder="请输入患者的大致年龄" value="{{formData.age}}" data-field="age" bindinput="handleInputChange"/>
      </view>
      <view class="form-item">
        <text class="label">紧急联系电话</text>
        <input class="input" type="number" placeholder="监护人的电话，用于紧急联系" value="{{formData.emergencyContact}}" data-field="emergencyContact" bindinput="handleInputChange"/>
      </view>
      <view class="form-item">
        <text class="label">家庭住址</text>
        <input class="input" placeholder="选填，用于找到后送回" value="{{formData.address}}" data-field="address" bindinput="handleInputChange"/>
      </view>
      <view class="form-item">
        <text class="label">重要医疗状况</text>
        <input class="input" placeholder="选填，如糖尿病、心脏病等" value="{{formData.medicalCondition}}" data-field="medicalCondition" bindinput="handleInputChange"/>
      </view>
    </block>

    <button class="submit-btn" bindtap="handleSubmit" hover-class="button-hover">完成注册</button>
  </view>
</view>